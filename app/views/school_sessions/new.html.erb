<%- content_for :sidebar do -%>
  <%= render :partial => 'schools/sidebar' %>
<%- end -%>

<%- javascript_tag do -%>
  function toggle(){
    swap(document.getElementById('login_container'));
    swap(document.getElementById('openid_container'));
  }
  function swap(element){
    if(element.style.display == 'none')
      element.style.display = '';
    else
      element.style.display = 'none';
  }
<%- end -%>

<div class="colborder span-8">
  <h2>Login School</h2>
  <%- form_for @school_session, :url => school_session_path do |f| -%>
    <%= f.error_messages %>
    <div id="login_container" <% unless @school_session.openid_identifier.blank? %> style="display: none;"<% end %>>
      <p>
        <%= f.label :email %> (or <%= link_to_function 'use OpenID', "toggle()" %>)<br />
        <%= f.text_field :email %>
      </p>

      <p>
        <%= f.label :password %><br />
        <%= f.password_field :password %>
      </p>
    </div>
    <div id="openid_container" <% if @school_session.openid_identifier.blank? %> style="display: none;"<% end %>>
      <p>
        <%= f.label :openid_identifier, 'OpenID' %> (or <%= link_to_function 'use regular email/password', "toggle()" %>)<br />
        <%= f.text_field :openid_identifier %>
      </p>
    </div>

    <p>
      <%= f.check_box :remember_me %><%= f.label :remember_me %>
    </p>

    <p>
      <%= f.submit "Login" %>
    </p>
  <%- end -%>
  <br />
  <%= link_to "Forgot password", new_password_reset_path %>

</div>
<div class="last span-7">
  <h2>Register a School</h2>
  <%- form_for :school, :url => schools_path, :html => {:method => :post} do |f| -%>

    <%= render :partial => 'schools/form', :locals => {:f => f} %>
    <p>
      <%= f.submit "Register School" %>
    </p>
  <%- end -%>
</div>
