<div class="team">
  <% team = f.object %>
  <%= '<hr/>' if team.is_exhibition %>
  <p>
    <%= f.hidden_field :is_exhibition %>
    <%= f.label :level, 'Team level:' %>
    <% if team.is_exhibition %>
      <%= f.select :level, [Team::APPRENTICE, Team::WIZARD] %>
      <%= f.hidden_field :_delete %>

      <%= remove_link '[Remove this team]', ".team", :class => 'controls' %>
    <% else %>
      <%= team.level %>
      <%= f.hidden_field :level %>
    <% end %>
  </p>
  <% if team.is_exhibition && !team.new_record? %>
    <p><label>Team ID Number:</label> <%= team.id %></p>
  <% end %>
  <%= small_errors(team.students) %>
  <table id="students<%= team.new_record? ? f.options[:child_index] : team.id %>" class="noborder">
    <caption>
      Students (<%= team.students.size %>/<%= Team::MAXSTUDENTS %>)
    </caption>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>&nbsp;</th>
    </tr>
    <% team.students.build if team.students.size < Team::MAXSTUDENTS %>
    <% f.fields_for :students do |sf| %>
      <%= render 'student', :f => sf %>
    <% end %>
  </table>
  <%= add_link 'add', "students#{team.new_record? ? f.options[:child_index] : team.id}", :var => 'student' %>
</div>
